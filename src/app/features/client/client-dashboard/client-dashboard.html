<div class="dashboard-container">
  <!-- Dashboard Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1>Tableau de bord Client</h1>
      <p class="subtitle">GÃ©rez vos commandes et suivez vos livraisons</p>
    </div>
    <button routerLink="/client/products" class="btn btn-primary">
      + Nouvelle Commande
    </button>
  </div>

  <!-- Alerts Section -->
  <div class="alerts-section" *ngIf="alerts().length > 0">
    <div *ngFor="let alert of alerts()" [class]="'alert alert-' + alert.type">
      <span class="alert-icon">{{ alert.icon }}</span>
      <span class="alert-message">{{ alert.message }}</span>
    </div>
  </div>

  <!-- Stats Grid - Order Stats -->
  <div class="section-title">
    <h2>ğŸ“¦ Mes Commandes</h2>
  </div>
  <div class="stats-grid">
    <app-stat-card label="Total" [value]="stats().total" variant="primary" icon="ğŸ“¦">
    </app-stat-card>

    <app-stat-card label="CrÃ©Ã©es" [value]="stats().created" variant="info" icon="ğŸ“„">
    </app-stat-card>

    <app-stat-card label="RÃ©servÃ©es" [value]="stats().reserved" variant="warning" icon="ğŸ”’">
    </app-stat-card>

    <app-stat-card label="ExpÃ©diÃ©es" [value]="stats().shipped" variant="success" icon="ğŸšš">
    </app-stat-card>
  </div>

  <!-- Stats Grid - Shipment Stats -->
  <div class="section-title">
    <h2>ğŸšš Mes ExpÃ©ditions</h2>
    <a routerLink="/client/shipments" class="view-all-link">Voir tout â†’</a>
  </div>
  <div class="stats-grid stats-grid-3">
    <app-stat-card label="PlanifiÃ©es" [value]="shipmentStats().planned" variant="info" icon="ğŸ“‹">
    </app-stat-card>

    <app-stat-card label="En transit" [value]="shipmentStats().inTransit" variant="warning" icon="ğŸš›">
    </app-stat-card>

    <app-stat-card label="LivrÃ©es" [value]="shipmentStats().delivered" variant="success" icon="âœ…">
    </app-stat-card>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions-section">
    <h2>âš¡ Actions Rapides</h2>
    <div class="quick-actions-grid">
      <a routerLink="/client/products" class="quick-action-card">
        <span class="action-icon">ğŸ›’</span>
        <span class="action-label">Nouvelle Commande</span>
        <span class="action-desc">Parcourir le catalogue produits</span>
      </a>
      <a routerLink="/client/orders" class="quick-action-card">
        <span class="action-icon">ğŸ“‹</span>
        <span class="action-label">Mes Commandes</span>
        <span class="action-desc">Voir toutes mes commandes</span>
      </a>
      <a routerLink="/client/shipments" class="quick-action-card">
        <span class="action-icon">ğŸšš</span>
        <span class="action-label">Suivi Livraisons</span>
        <span class="action-desc">Suivre mes expÃ©ditions</span>
      </a>
      <a routerLink="/client/cart" class="quick-action-card">
        <span class="action-icon">ğŸ›ï¸</span>
        <span class="action-label">Mon Panier</span>
        <span class="action-desc">Voir articles en attente</span>
      </a>
    </div>
  </div>

  <!-- Recent Orders Section -->
  <div class="recent-section">
    <div class="section-header">
      <h2>ğŸ• Commandes RÃ©centes</h2>
      <a routerLink="/client/orders" class="view-all-link">Voir tout â†’</a>
    </div>

    <div class="orders-list" *ngIf="recentOrders().length > 0; else noOrders">
      <div *ngFor="let order of recentOrders()" class="order-item">
        <div class="order-info">
          <span class="order-id">#{{ order.id }}</span>
          <span class="order-date">{{ order.createdAt | date:'short' }}</span>
        </div>
        <div class="order-meta">
          <div class="order-status" [class]="'status-' + order.status.toLowerCase()">
            {{ getStatusLabel(order.status) }}
          </div>
          <!-- TTL indicator for reserved orders -->
          <div class="ttl-indicator" *ngIf="order.status === 'RESERVED' && order.reservedAt">
            <span class="ttl-icon">â±ï¸</span>
            <span class="ttl-text">{{ getRemainingTTL(order.reservedAt) }}</span>
          </div>
        </div>
        <div class="order-actions">
          <a [routerLink]="['/client/orders', order.id]" class="btn-link">DÃ©tails â†’</a>
        </div>
      </div>
    </div>

    <ng-template #noOrders>
      <div class="empty-state">
        <span class="empty-icon">ğŸ“­</span>
        <p class="text-muted">Aucune commande rÃ©cente.</p>
        <a routerLink="/client/products" class="btn btn-primary">CrÃ©er ma premiÃ¨re commande</a>
      </div>
    </ng-template>
  </div>

  <!-- Expiring Reservations Warning -->
  <div class="expiring-section" *ngIf="expiringReservations().length > 0">
    <div class="section-header">
      <h2>âš ï¸ RÃ©servations Ã  Finaliser</h2>
    </div>
    <div class="expiring-list">
      <div *ngFor="let order of expiringReservations()" class="expiring-item">
        <div class="expiring-info">
          <span class="order-id">#{{ order.id }}</span>
          <span class="expiring-ttl">{{ getRemainingTTL(order.reservedAt) }}</span>
        </div>
        <a [routerLink]="['/client/orders', order.id]" class="btn btn-warning-sm">
          Finaliser â†’
        </a>
      </div>
    </div>
  </div>
</div>